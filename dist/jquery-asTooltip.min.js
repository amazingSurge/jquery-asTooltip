/*! jQuery asTooltip - v0.3.0 - 2014-11-18
* https://github.com/amazingSurge/jquery-asTooltip
* Copyright (c) 2014 amazingSurge; Licensed GPL */
!function(a,b,c,d){"use strict";var e="asTooltip",f=a(c),g=[],h=function(b,c,d,e){var f,g,h,i,j,k=a(b),l=0,m=0;f=e?b:k.offset(),g=e?0:k.outerWidth(),h=e?0:k.outerHeight(),i=c.outerWidth(),j=c.outerHeight();for(var n=0;n<d.length;n++)switch(d[n]){case"left":l=0===n?f.left-i:f.left;break;case"middle":switch(d[0]){case"left":case"right":m=f.top+(h-j)/2;break;case"top":case"bottom":l=f.left+(g-i)/2}break;case"right":l=0===n?f.left+g:f.left+g-i;break;case"top":m=0===n?f.top-j:f.top;break;case"bottom":m=0===n?f.top+h:f.top+h-j}return{left:Math.round(l),top:Math.round(m)}},i=function(b,c,d){var e=a(b),g=e.offset(),h=d.offset(),i="BODY"===d[0].tagName?f.scrollLeft():d.scrollLeft(),j="BODY"===d[0].tagName?f.scrollTop():d.scrollTop(),k="BODY"===d[0].tagName?g:{top:g.top-h.top,left:g.left-h.left},l=e.outerWidth(),m=e.outerHeight(),n=c.outerWidth(),o=c.outerHeight(),p="BODY"===d[0].tagName?f.innerWidth():d.outerWidth(),q="BODY"===d[0].tagName?f.innerHeight():d.outerHeight(),r=[];return o>k.top-j&&r.push("top"),o+m+k.top>j+q&&r.push("bottom"),n>k.left-i&&r.push("left"),n+l+k.left>i+p&&r.push("right"),r},j=a[e]=function(c,d){var e,f,g=a(b.body),h=c[0]===b?g:c;f=this.parseTargetData(a(h).data()),e=this.options=a.extend(!0,{},j.defaults,d,f),e.position.container=e.position.container?a(e.position.container):g,e.position.target||(e.position.target=h),e.show.target||(e.show.target=h),e.hide.target||(e.hide.target=h),this.$el=a(h),this.namespace=this.options.namespace,e.content=this.getContent(),this.enabled=!0,this.isOpen=!1,this.loadFlag=!1,this.moveFlag=!1,this.showTimer=null,this.hideTimer=null,this.classes={show:this.namespace+"_isShow",isLoading:this.namespace+"_isLoading",active:this.namespace+"_active",enabled:this.namespace+"_enabled"},this.trigger("init"),this.init()};j.prototype={constructor:j,init:function(){var b=this,c=this.options,d=c.show.target,e=c.hide.target,g=c.show.event,h=c.hide.event;this.$tip=a(c.tpl.replace(/{{namespace}}/g,this.namespace)),this.$loading=a("."+this.namespace+"-loading",this.$tip),this.$content=a("."+this.namespace+"-content",this.$tip),d===e&&g===h?this._bind(d,g,function(a){(this.isOpen?this.hideMethod:this.showMethod).call(this,a)}):(this._bind(d,g,function(a){this.showMethod.call(this,a)}),this._bind(e,h,function(a){this.hideMethod.call(this,a)})),"BODY"===c.position.container[0].tagName&&(c.position.adjust.resize&&this._bind(f,"resize",function(){b.isOpen&&b.setPosition()}),c.position.adjust.scroll&&this._bind(f,"scroll",function(){b.isOpen&&b.setPosition()}))},_bind:function(b,c,d,e){if(b&&d&&c.length){var f=e?c:c+"."+e;return a(b).on(f,a.proxy(d,this)),this}},_unbind:function(b,c,d){return b&&a(b).unbind(d?c:c+"."+d),this},parseTargetData:function(b){var c={};return a.each(b,function(a,b){var e=a.split("_"),f=e.length,g=c;if(1===f)c[e[0]]=b;else for(var h=0;f>h;h++)0===h?c[e[h]]===d&&(c[e[h]]={}):h===f-1?g[e[h]]=b:g[e[h]]===d&&(g[e[h]]={}),g=c[e[h]]}),c},parseTpl:function(a){return a.replace("{{namespace}}",self.namespace)},getDelegateOptions:function(){var b={};return this._options&&a.each(this._options,function(a,c){j.defaults[a]!==c&&(b[a]=c)}),b},showMethod:function(c){var d=c instanceof this.constructor?c:a(c.currentTarget).data(e),f=this.options;if(d||(d=new this.constructor(c.currentTarget,this.getDelegateOptions()),a(c.currentTarget).data(e,d)),f.ajax||d.options.content){if(d.isOpen?clearTimeout(d.hideTimer):(clearTimeout(d.showTimer),d.showTimer=setTimeout(function(){a.proxy(d.show,d)()},f.show.delay)),"mouse"===f.position.target){if(this.moveFlag)return;this.isFirst=!0,a(b).on("mousemove."+e,a.proxy(this.move,d)),this.moveFlag=!0}"click"===f.hide.event&&f.hide.container&&this._bind(f.hide.container,f.hide.event,function(b){var c=a(b.target);0===c.closest(d.$el).length&&0===c.closest(d.$tip).length&&d.isOpen&&a.proxy(d.hide,d)()})}},hideMethod:function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data(e),d=this.options,f=!1;return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data(e,c)),d.ajax||c.options.content?c.isOpen?void("mouse"===d.position.target&&this.moveFlag||("click"===d.hide.event&&d.hide.container&&this._unbind(d.hide.container,d.hide.event),d.hide.inactive&&(this._bind(c.$tip,"mouseenter."+e,function(){f=!0}),this._bind(c.$tip,"mouseleave."+e,function(){f=!1,clearTimeout(c.hideTimer),c.hideTimer=setTimeout(function(){a.proxy(c.hide,c)()},c.options.hide.delay),c._unbind(c.$tip,"mouseenter."+e+" mouseleave."+e)})),clearTimeout(c.hideTimer),c.hideTimer=setTimeout(function(){f||a.proxy(c.hide,c)()},d.hide.delay))):void clearTimeout(c.showTimer):void 0},move:function(c){var d=Math.round(c.pageX),f=Math.round(c.pageY),g=this.$el.offset().top,h=this.$el.offset().left,i=this.$el.outerWidth(),j=this.$el.outerHeight();d>=h&&h+i>=d&&f>=g&&g+j>=f?this.options.position.adjust.mouse?this.setPosition(c):this.isFirst&&(this.setPosition(c),this.isFirst=!1):(a(b).off("mousemove."+e),this.moveFlag=!1,this.hideMethod(this.$el.data(e)))},trigger:function(a){var b=Array.prototype.slice.call(arguments,1),c=[this].concat(b);this.$el.trigger(e+"::"+a,c),a=a.replace(/\b\w+\b/g,function(a){return a.substring(0,1).toUpperCase()+a.substring(1)});var d="on"+a;"function"==typeof this.options[d]&&this.options[d].apply(this,b)},getContent:function(){return this.$el.attr(this.options.contentAttr)||("function"==typeof this.options.content?this.options.content():this.options.content)},setPosition:function(b){var c,d,e,f=this.options,g=this.$el,j=f.position.container,k=!1,l=!1;e=j.css("position");var m=f.position.value.split(" ");if("mouse"===f.position.target&&b?(g={top:Math.round(b.pageY),left:Math.round(b.pageX)},l=!0):"object"==typeof f.position.target&&(g=f.position.target),f.position.auto&&"mouse"!==f.position.target){var n=i(g,this.$tip,j),o=["top","right","bottom","left"];a.each(n,function(b,c){o=a.map(o,function(a){return a!==c?a:null})}),o.length>0&&(m[0]=o[0])}this.$tip.addClass(this.namespace+"-element-"+m[0]).addClass(this.namespace+"-arrow-"+m[1]),c=h(g,this.$tip,m,l),"static"!==e&&(d=j.offset(),k=!0),this.$tip.css({top:c.top+(k?-d.top:0),left:c.left+(k?-d.left:0)})},loadToggle:function(){var a=this.loadFlag;a?(this.$tip.removeClass(this.namespace+"_isLoading"),this.loadFlag=!1):(this.$tip.addClass(this.namespace+"_isLoading"),this.loadFlag=!0)},statusToggle:function(a){a?this.$el.removeClass(this.classes.active):this.$el.addClass(this.classes.active)},rePosition:function(a){return this.setPosition(a),this},setContent:function(){var a=this.options;a.ajax&&this.loadToggle(),this.$content.html(a.content),this.$tip.appendTo(a.position.container),"mouse"!==a.position.target&&this.setPosition()},show:function(){var a=this.options;if(this.enabled)return a.skin&&this.$tip.addClass(this.namespace+"_"+a.skin),a.ajax&&a.ajax(this),this.setContent(this.isOpen),this.statusToggle(this.isOpen),this.isOpen=!0,this.trigger("show"),this},hide:function(){return this.options.ajax&&(this.$tip.removeClass(this.namespace+"_isLoading"),this.loadFlag=!1),this.$tip.off("."+e),this.statusToggle(this.isOpen),this.$tip.remove(),this.isOpen=!1,this.trigger("hide"),this},enable:function(){return this.enabled=!0,this.$el.addClass(this.classes.enabled),this},disable:function(){return this.enabled=!1,this.$el.removeClass(this.classes.enabled),this},destroy:function(){this.$el.off("."+e)}},j.closeAll=function(){g.map(function(a){a.isOpen&&a.hide()})},j.defaults={namespace:e,skin:"dream",closeBtn:!1,position:{value:"right middle",target:!1,container:!1,auto:!1,adjust:{mouse:!0,resize:!0,scroll:!0}},show:{target:!1,event:"mouseenter",delay:0},hide:{target:!1,event:"mouseleave",delay:0,container:!1,inactive:!1},content:null,contentAttr:"title",ajax:!1,tpl:'<div class="{{namespace}}"><div class="{{namespace}}-inner"><div class="{{namespace}}-loading"></div><div class="{{namespace}}-content"></div></div></div>',onInit:null,onShow:null,onHide:null,onFocus:null,onBlur:null},a.fn[e]=function(b){if("string"!=typeof b)return this.each(function(){a.data(this,e)||a.data(this,e,new j(this,b))});var c=b,d=Array.prototype.slice.call(arguments,1);if(/^\_/.test(c))return!1;if(!/^(get)/.test(c))return this.each(function(){var b=a.data(this,e);b&&"function"==typeof b[c]&&b[c].apply(b,d)});var f=this.first().data(e);return f&&"function"==typeof f[c]?f[c].apply(f,d):void 0}}(jQuery,document,window);